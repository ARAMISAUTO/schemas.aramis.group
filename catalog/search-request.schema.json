{
  "$id": "https://schemas.aramis.group/catalog/search-request.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "$schema": { "type": "string", "pattern": "\/catalog\/search-request\\.schema\\.json$" },

    "criteria": { "type": "object", "additionalProperties": false, "properties": {
      "text": { "type": "string" },
      "offer_id": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "type": "string", "minLength": 1 }}
      }},
      "vehicle_id": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "type": "string", "minLength": 1 }}
      }},
      "offer_type.id": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "$ref": "base.schema.json#/$defs/offer-type-id"}}
      }},
      "first_circulation_date": { "type": "object", "additionalProperties": false, "required": ["min", "max"], "properties": {
        "min": { "type": ["null", "string"], "format": "date", "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$" },
        "max": { "type": ["null", "string"], "format": "date", "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$" }
      }},
      "milage.km": { "type": "object", "additionalProperties": false, "required": ["min", "max"], "properties": {
        "min": { "type": ["null", "integer"] },
        "max": { "type": ["null", "integer"] }
      }},
      "euronorm": { "type": "object", "additionalProperties": false,"required": ["in"], "properties": {
        "in": { "type": "array", "items": { "$ref": "base.schema.json#/$defs/euronorm-string"} }
      }},
      "critair": { "type": "object", "additionalProperties": false,"required": ["in"], "properties": {
        "in": { "type": "array", "items": { "$ref": "base.schema.json#/$defs/critair-string"} }
      }},
      "selling_price_with_taxes": { "type": "object", "additionalProperties": false, "required": ["min", "max"], "properties": {
        "min": { "type": ["null", "number"] },
        "max": { "type": ["null", "number"] }
      }},
      "selling_price_with_takeover_with_taxes": { "type": "object", "additionalProperties": false, "required": ["min", "max"], "properties": {
        "min": { "type": ["null", "number"] },
        "max": { "type": ["null", "number"] }
      }},
      "indicative_minimum_monthly_installment": { "type": "object", "additionalProperties": false, "required": ["min", "max"], "properties": {
        "min": { "type": ["null", "number"] },
        "max": { "type": ["null", "number"] }
      }},
      "indicative_minimum_monthly_installment_with_takeover": { "type": "object", "additionalProperties": false, "required": ["min", "max"], "properties": {
        "min": { "type": ["null", "number"] },
        "max": { "type": ["null", "number"] }
      }},
      "maker": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "type": "string", "minLength": 1 }}
      }},
      "model": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "type": "string", "minLength": 1 }}
      }},
      "simple_color.id": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "$ref": "base.schema.json#/$defs/simple-color-id"}}
      }},
      "simple_equipment.id": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "$ref": "base.schema.json#/$defs/simple-equipment-id"}}
      }},
      "category.id": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "$ref": "base.schema.json#/$defs/category-id"}}
      }},
      "energy_type.id": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "$ref": "base.schema.json#/$defs/energy-type-id"}}
      }},
      "transmission.id": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "$ref": "base.schema.json#/$defs/transmission-id"}}
      }},
      "drive.id": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "$ref": "base.schema.json#/$defs/drive-id"}}
      }},
      "promotion.id": { "type": "object", "additionalProperties": false, "required": ["in"], "properties": {
        "in": { "type": "array", "items": { "type": "string", "minLength": 1 }}
      }},
      "doors": { "type": "object", "additionalProperties": false, "required": ["min", "max"], "properties": {
        "min": { "type": ["null", "integer"] },
        "max": { "type": ["null", "integer"] }
      }},
      "seats": { "type": "object", "additionalProperties": false, "required": ["min", "max"], "properties": {
        "min": { "type": ["null", "integer"] },
        "max": { "type": ["null", "integer"] }
      }}
    }},
    "facets": { "type": "array", "uniqueItems": true, "items": { "enum": [
      "offer_type",
      "first_circulation_year",
      "mileage.km.slice",
      "euronorm",
      "critair",
      "selling_price_with_taxes.slice",
      "selling_price_with_takeover_with_taxes.slice",
      "indicative_load_installment.slice",
      "maker",
      "model",
      "simple_color",
      "simple_equipment",
      "category",
      "segment",
      "energy_type",
      "transmission",
      "drive",
      "promotion",
      "doors",
      "seats"
    ]}},
    "order": { "type": "array", "uniqueItems": true, "items": {"type": "object", "additionalProperties": false, "minProperties":1, "maxProperties": 1, "properties": {
      "publication_date": { "enum": ["asc", "desc"] },
      "mileage.km": { "enum": ["asc", "desc"] },
      "selling_price_with_taxes": { "enum": ["asc", "desc"] },
      "selling_price_with_takeover_with_taxes": { "enum": ["asc", "desc"] },
      "indicative_minimum_monthly_installment": { "enum": ["asc", "desc"] },
      "indicative_minimum_monthly_installment_with_takeover": { "enum": ["asc", "desc"] },
      "maker": { "enum": ["asc", "desc"] },
      "model": { "enum": ["asc", "desc"] },
      "power.ch": { "enum": ["asc", "desc"] },
      "combined_cycle_consumption.lt_per_100_km": { "enum": ["asc", "desc"] },
      "combined_cycle_consumption.kwh_per_100_km": { "enum": ["asc", "desc"] }
    }}},
    "limit": { "type": "integer", "minimum": 0, "default": 100 },
    "offset": { "type": "integer", "minimum": 0, "default": 0 },
    "fields": { "type": "array", "uniqueItems": true, "items": { "enum": [
      "vin",
      "offer_id",
      "vehicle_id",
      "offer_type.id",
      "offer_type.label",
      "status.id",
      "status.label",
      "origin_country.id",
      "origin_country.label",
      "is_marketplace",
      "first_circulation_date",
      "warranty_expiration_date",
      "mileage.km",
      "euronorm",
      "critair",
      "french_fiscal_power",
      "french_genre",
      "belgian_fiscal_power",
      "belgian_ototo.url",
      "belgian_carpass.url",
      "catalog_price_with_options_withtaxes",
      "takeover_premium",
      "selling_price_with_taxes",
      "discount.percent",
      "selling_price_with_takeover_with_taxes",
      "discount_with_takeover.percent",
      "indicative_loan.monthly_installment",
      "indicative_loan.months",
      "variants.vehicle_id",
      "variants.manufacturer_color",
      "variants.simple_color.id",
      "variants.simple_color.label",
      "variants.simple_color2.id",
      "variants.simple_color2.label",
      "variants.photo.url",
      "media.type",
      "media.url",
      "media.orientation",
      "photo.url",
      "maker",
      "model",
      "engine",
      "finish",
      "version",
      "interior",
      "manufacturer_color",
      "expert_comments",
      "category.id",
      "category.label",
      "segment.id",
      "segment.label",
      "energy_type.id",
      "energy_type.label",
      "simple_color.id",
      "simple_color.label",
      "interior_simple_color.id",
      "interior_simple_color.label",
      "transmission.id",
      "transmission.label",
      "drive.id",
      "drive.label",
      "equipments.label",
      "equipments.category.id",
      "equipments.category.label",
      "simple_equipments.id",
      "simple_equipments.label",
      "options.label",
      "options.price_with_taxes",
      "promotions.id",
      "promotions.label",
      "promotions.color",
      "doors",
      "gears",
      "seats",
      "cylinders",
      "power.ch",
      "power.kw",
      "engine_capacity.cc",
      "urban_cycle_consumption.lt_per_100_km",
      "urban_cycle_consumption.kwh_per_100_km",
      "extra_urban_cycle_consumption.lt_per_100_km",
      "extra_urban_cycle_consumption.kwh_per_100_km",
      "combined_cycle_consumption.lt_per_100_km",
      "combined_cycle_consumption.kwh_per_100_km",
      "co2_emissions_nedc.grams_per_km",
      "co2_emissions_wltp.grams_per_km",
      "height.meters",
      "width.meters",
      "length.meters",
      "wheelbase.meters",
      "unloaded_weight.kg",
      "total_authorized_weight.kg",
      "min_boot_space_back_capacity.lt",
      "max_boot_space_back_capacity.lt",
      "boot_space_front_capacity.lt",
      "max_speed.km_per_hour",
      "electric_range_nedc.km",
      "electric_range_wltp.km",
      "electric_battery_warranty_period.km",
      "electric_battery_warranty_period.years",
      "electric_battery_state_of_health.percent",
      "electric_battery_capacity.kwh",
      "electric_battery_type",
      "electric_battery_slow_charge_power.kw",
      "electric_battery_slow_charge_time.minutes",
      "electric_battery_medium_charge_power.kw",
      "electric_battery_medium_charge_time.minutes",
      "electric_battery_quick_charge_power.kw",
      "electric_battery_quick_charge_time.minutes",
      "electric_battery_cost",
      "electric_maximum_power_car_electrical_outlet.kw",
      "electric_maximum_power_car_direct_current.amperes"
    ]}}
  }
}
