{
    "$id": "https://schemas.aramis.group/marketplace/enrich.schema.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "enrichers": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "weight": {
                    "type": "object",
                    "additionalProperties": false,
                    "minProperties": 1,
                    "maxProperties": 1,
                    "description": "Enabled/disable weight enricher",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": false
                        }
                    }
                },
                "category": {
                    "type": "object",
                    "additionalProperties": false,
                    "minProperties": 1,
                    "maxProperties": 1,
                    "description": "Enabled/disable category enricher",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": false
                        }
                    }
                },
                "electricCo2Emission": {
                    "type": "object",
                    "additionalProperties": false,
                    "minProperties": 1,
                    "maxProperties": 1,
                    "description": "Enabled/disable electric co2 emission enricher",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": true
                        }
                    }
                },
                "pictogram": {
                    "type": "object",
                    "additionalProperties": false,
                    "minProperties": 1,
                    "maxProperties": 1,
                    "description": "Enabled/disable pictogram enricher",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": true
                        }
                    }
                },
                "priceComputation": {
                    "type": "object",
                    "additionalProperties": false,
                    "minProperties": 1,
                    "maxProperties": 1,
                    "description": "Enabled/disable price computation enricher",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": true
                        }
                    }
                },
                "pictureOptimizer": {
                    "type": "object",
                    "additionalProperties": false,
                    "minProperties": 1,
                    "maxProperties": 2,
                    "description": "Enabled/disable picture optimizer enricher",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "default": false,
                            "description": "By default, picture optimization is disabled for all partners"
                        },
                        "operations": {
                            "type": "object",
                            "additionalProperties": false,
                            "description": "List of operations (filters) to apply on picture",
                            "properties": {
                                "crop": {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "minProperties": 1,
                                    "maxProperties": 1,
                                    "properties": {
                                        "enabled": {
                                            "type": "boolean",
                                            "default": false
                                        }
                                    }
                                },
                                "cropMargin": {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "minProperties": 1,
                                    "maxProperties": 1,
                                    "properties": {
                                        "enabled": {
                                            "type": "boolean",
                                            "default": false
                                        }
                                    }
                                },
                                "cropMarginAuto": {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "description": "List of crop margin auto",
                                    "minProperties": 1,
                                    "maxProperties": 2,
                                    "properties": {
                                        "enabled": {
                                            "type": "boolean",
                                            "default": false
                                        },
                                        "parameters": {
                                            "type": "array",
                                            "items": {
                                                "type": "number",
                                                "minimum": 0,
                                                "maximum": 1
                                            },
                                            "additionalProperties": false,
                                            "minProperties": 4,
                                            "maxProperties": 4
                                        }
                                    },
                                    "if": {
                                        "properties": {
                                            "enabled": true
                                        }
                                    },
                                    "then": {
                                        "properties": {
                                            "parameters": {
                                                "minLength": 4
                                            }
                                        }
                                    }
                                },
                                "blurKeywords": {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "description": "Keywords for blur",
                                    "minProperties": 1,
                                    "maxProperties": 2,
                                    "properties": {
                                        "enabled": {
                                            "type": "boolean",
                                            "default": false
                                        },
                                        "parameters": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "additionalProperties": false
                                        }
                                    },
                                    "if": {
                                        "properties": {
                                            "enabled": true
                                        }
                                    },
                                    "then": {
                                        "properties": {
                                            "parameters": {
                                                "minLength": 1
                                            }
                                        }
                                    }
                                },
                                "blurPlate": {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "minProperties": 1,
                                    "maxProperties": 2,
                                    "properties": {
                                        "enabled": {
                                            "type": "boolean",
                                            "default": false
                                        },
                                        "parameters": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "additionalProperties": false
                                        }
                                    },
                                    "if": {
                                        "properties": {
                                            "enabled": true
                                        }
                                    },
                                    "then": {
                                        "properties": {
                                            "parameters": {
                                                "minLength": 1
                                            }
                                        }
                                    }
                                },
                                "deleteBackground": {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "minProperties": 1,
                                    "maxProperties": 2,
                                    "properties": {
                                        "enabled": {
                                            "type": "boolean",
                                            "default": false
                                        },
                                        "parameters": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "additionalProperties": false,
                                            "minLength": 1
                                        }
                                    }
                                }
                            },
                            "minProperties": 1,
                            "maxProperties": 6
                        },
                        "if": {
                            "properties": {
                                "enabled": true
                            }
                        },
                        "then": {
                            "properties": {
                                "operations": {
                                    "minLength": 1
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
